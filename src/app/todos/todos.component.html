<div class="container">
  <h1 class="mt-5">Lista de Todos</h1>

  <div class="input-group mb-3">
    <input type="text" class="form-control" placeholder="Buscar todos" [(ngModel)]="searchQuery" appShowButton="#button-search" aria-label="Buscar todos" aria-describedby="button-search">
    <button id="button-search" class="btn btn-primary" type="button" (click)="onSearch()" style="display: none;">Search</button>
  </div>

  <div *ngIf="apiError" class="alert alert-danger" role="alert">
    Hubo un error al cargar los datos. Por favor, inténtelo de nuevo más tarde.
  </div>

  <div *ngIf="noResults && searchInitiated && !apiError" class="alert alert-warning" role="alert">
    No se encontraron resultados.
  </div>

  <ul *ngIf="!searchInitiated && !apiError" class="list-group">
    <li *ngFor="let todo of todos" class="list-group-item d-flex justify-content-between align-items-center">
      {{ todo.title }}
      <button class="btn btn-info btn-sm" (click)="viewDetails(todo.id)">Ver detalles</button>
    </li>
  </ul>

  <ul *ngIf="searchInitiated && !noResults && !apiError" class="list-group">
    <li *ngFor="let todo of filteredTodos" class="list-group-item d-flex justify-content-between align-items-center">
      {{ todo.title }}
      <button class="btn btn-info btn-sm" (click)="viewDetails(todo.id)">Ver detalles</button>
    </li>
  </ul>
</div>
